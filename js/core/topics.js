function parse_single_topic(a){a.split("_");Buleys.queues.pending_crawls.slice(0,1);Buleys.queues.pending_crawls.push(a)}
function update_topic_in_topics_database(a,b){new_topics_transaction();b.topic_key=a;b.modified=new Date;if(typeof b.last_updated!="undefined")b.last_updated=new Date(parseInt(b.last_updated)*1E3);if(typeof b.updated!="undefined")b.updated=new Date(parseInt(b.updated)*1E3);if(typeof b.last_attempt!="undefined")b.last_attempt=new Date(parseInt(b.last_attempt)*1E3);var c=Buleys.objectStore.put(b);c.onsuccess=function(){Buleys.objectId=c.result};c.onerror=function(){}}
function get_page_topic_info(a,b){new_topics_transaction();var c=Buleys.objectStore.get(a+"_"+b);c.onsuccess=function(){if(typeof c.result!=="undefined"||c.result.name!=="")load_page_title_info(c.result)};c.onerror=function(){}}function get_topics(){try{new_topics_transaction();Buleys.index=Buleys.objectStore.index("topic_key");var a=Buleys.index.getAll();a.onsuccess=function(){var c=a.result;c&&c.length>=0&&jQuery.each(c,function(){})};request.onerror=function(){}}catch(b){}}
function remove_topic(a){new_topics_transaction();a=Buleys.objectStore["delete"](a);a.onsuccess=function(){delete Buleys.objectId};a.onerror=function(){}}function add_or_update_topic(a,b){new_topics_transaction();if(typeof b=="undefined")b={};var c=Buleys.objectStore.get(a);c.onsuccess=function(){typeof c.result=="undefined"?add_topic_to_topics_database(a,b):update_topic_in_topics_database(a,b)};c.onerror=function(){}}
function add_topic_to_topics_database(a,b){new_topics_transaction();if(typeof b=="undefined")b={};b.topic_key=a;b.modified=new Date;var c=Buleys.objectStore.add(b);c.onsuccess=function(){Buleys.objectId=c.result};c.onerror=function(){}}
function new_topics_transaction(){try{var a=Buleys.db.transaction(["topic"],1,1E3);a.oncomplete=function(){delete Buleys.objectStore};a.onabort=function(){};Buleys.objectStore=a.objectStore("topic")}catch(b){a=Buleys.db.setVersion(parseInt(Buleys.db.version)+1);a.onsuccess=function(){Buleys.objectStore=Buleys.db.createObjectStore("topic",{keyPath:"topic_key"},true);Buleys.objectStore.createIndex("slug","slug",{unique:false});Buleys.objectStore.createIndex("type","type",{unique:false});Buleys.objectStore.createIndex("last_updated",
"last_updated",{unique:false})};a.onerror=function(){}}};
