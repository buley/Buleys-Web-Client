function new_follows_transaction(){try{var a=Buleys.db.transaction(["follows"],1,1E3);a.oncomplete=function(){delete Buleys.objectStore};a.onabort=function(){};Buleys.objectStore=a.objectStore("follows")}catch(c){a=Buleys.db.setVersion(parseInt(Buleys.db.version)+1);a.onsuccess=function(){Buleys.objectStore=Buleys.db.createObjectStore("follows",{keyPath:"key"},true);Buleys.objectStore.createIndex("modified","modified",{unique:false})};a.onerror=function(){}}}
function get_follows(){try{new_follows_transaction();Buleys.index=Buleys.objectStore;var a=Buleys.index.getAll();a.onsuccess=function(){var b=a.result;b&&b.length>=0&&jQuery.each(b,function(d,e){parse_single_topic(e.key)})};request.onerror=function(){}}catch(c){}}$("html").bind("mousemove",function(a){Buleys.mouse.mouse_x=a.pageX;Buleys.mouse.mouse_y=a.pageY});function getKeys(a){var c=[];if(typeof a!=="undefined"){$.each(a,function(b){c.push(b)});return c.length}else return 0}
function get_follows_deleteme(){new_follows_transaction();try{new_categories_transaction();Buleys.index=Buleys.objectStore.index("id");var a=Buleys.index.getAll();a.onsuccess=function(){var b=a.result;b&&b.length>=0&&jQuery.each(b,function(d,e){send_to_console("get_follows(): "+e)})};request.onerror=function(){}}catch(c){}}
function get_page_follow_status(a,c){new_follows_transaction();var b=Buleys.objectStore.get(a+"_"+c);b.onsuccess=function(){typeof b.result=="undefined"||b.result==""?jQuery("#page_meta").append("<a href='#' class='follow_topic empty_heart_icon'></a>"):jQuery("#page_meta").append("<a href='#' class='unfollow_topic heart_icon'></a>")};b.onerror=function(){}}
function remove_follow(a,c){if(typeof a!=="undefined"&&typeof c!=="undefined"){new_follows_transaction();var b=Buleys.objectStore["delete"](a+"_"+c);b.onsuccess=function(){delete Buleys.objectId};b.onerror=function(){}}}function add_follow_if_doesnt_exist(a,c){if(typeof a!=="undefined"&&typeof c!=="undefined"){new_follows_transaction();var b=Buleys.objectStore.get(a+"_"+c);b.onsuccess=function(){typeof b.result=="undefined"&&add_follow_to_follows_database(a,c)};b.onerror=function(){}}}
function add_follow_to_follows_database(a,c){new_follows_transaction();var b={key:a+"_"+c,modified:(new Date).getTime()},d=Buleys.objectStore.add(b);d.onsuccess=function(){Buleys.objectId=d.result};d.onerror=function(){}};
